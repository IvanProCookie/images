<!DOCTYPE html>
<html>
  <head>
    <title>iPhotos</title>
    <link rel="icon" type="image/png" href="/iphotos/favicon.png">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <style>
      * {
        box-sizing: border-box;
      }

      body {
        margin: 0;
        background-color: #e7e7e7;
        font-family: consolas;
        color: inherit;
        font-size: 1rem;
        line-height: 1.5rem;
        background-color: #135fad;
      }

      .head {
        padding: 50px 50px 35px;
        padding-bottom: 50px;
      }

      .logo {
        height: 50px;
        display: block;
        margin: 0 auto;
        width: 420px;
        height: 105px;
        image-rendering: pixelated;
      }

      .card {
        border-radius: 16px;
        margin: 0 auto;
        padding: 0px;
        max-width: 420px;
        background-color: rgba(0, 0, 0, 0.1);
        position: relative;
        color: #FFF
      }

      .con {
        padding: 10px;
        margin-top: 10px;
        margin-bottom: 10px;
      }

      .list {
        margin-top: 0px;
      }

      a {
        color: #73ade9;
      }

      .img {
        position: absolute;
        right: 0px;
        top: 0px;
        padding: 10px;
        height: 110px;
      }
    </style>
  </head>

  <body>
    <header class="head"><img src="/iphotos/logo.png" alt="iPhotos Logo" loading="lazy" class="logo"/>
    </header>
    
    <!--div class="card">
      <div class="con"><a href="https://ivanprocookie.github.io/iphotos/img/calculator.png">Calculator</a>:
      	<ul class="list">
          <li>Size: X1 x Y1,</li>
          <li>OG Size:  X2 x Y2.</li>
        </ul>
      </div><img class="img" src="https://ivanprocookie.github.io/iphotos/img/calculator.png"/>
    </div-->

  </body>

<script>
  fetch('https://api.github.com/repos/ivanprocookie/iphotos/contents/piskel')
    .then(res=>{return res.json()})
    .then(json=>{
    json.forEach((el, eli)=>{
      fetch(`/iphotos/piskel/${el.name}`)
        .then(res=>{return res.json()})
        .then(piskel=>{
        let name = el.name.replace(/\.piskel/,'')
        const newImage = new Image(); newImage.src = `/iphotos/img/${name}.png`;
        newImage.onload = function(){
          let width = piskel.piskel.width
          let height = piskel.piskel.height
          let imgname = piskel.piskel.name
          let imgwidth = this.width
          let imgheight = this.height

          const card = document.createElement('div');
          card.setAttribute('class','card')
          card.setAttribute('id',eli)
          card.innerHTML = `
<div class="con">
<a href="/iphotos/img/${name}.png">${name.charAt(0).toUpperCase() + name.slice(1)}</a>:
<ul class="list">
<li>Size: ${width} x ${height},</li>
<li>OG Size: ${imgwidth} x ${imgheight}.</li>
  </ul>
  </div><img class="img" src="/iphotos/img/${name}.png" alt="${imgname}"/>
`;
          document.body.appendChild(card);
        };
        newImage.onerror = function(err){alert('Error loading image:\n'+err)};

      });
    })

  }
  ).catch(err=>{alert(err)});

</script>

</html
